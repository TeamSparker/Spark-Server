## ğŸ‡ Spark, &nbsp;A large fire comes from small spark

> ğŸ‘‘ WE SOPT 29th APPJAM ëŒ€ìƒ ğŸ‘‘ <br>
> ì¹œêµ¬ì™€ í•¨ê»˜í•˜ëŠ” 66ì¼ê°„ì˜ ìŠµê´€ í˜•ì„± ì„œë¹„ìŠ¤! <br>
> í”„ë¡œì íŠ¸ ê¸°ê°„ : 2022. 01. 03. ~ 2022. 01. 22.

![banner](https://user-images.githubusercontent.com/39653584/150547366-5ff166d7-874d-4b4d-a507-7a387c348991.png)
---


## â¤ï¸â€ğŸ”¥ Server Sparkers

| ì •ì„¤í¬ | ê¹€ì˜ê¶Œ | ë°•ì •í˜„ |
| :---: | :---: | :---: | 
|<img src="https://user-images.githubusercontent.com/39653584/150314775-cf8ad96d-3bf8-4a76-a9a0-1d39baac179f.png" width="200px" height="200px">| <img src="https://user-images.githubusercontent.com/39653584/150314721-214a6633-a627-4f4f-80d2-1c1dfdbf4c3f.png" width="200px" height="200px"> | <img src="https://user-images.githubusercontent.com/39653584/150314852-1d15d37c-42b4-40ba-9f81-d96b4ee7e759.png" width="200px" height="200px"> |
|[xxeol2](https://github.com/xxeol2)| [youngkwon02](https://github.com/youngkwon02)| [junghyun-jacky](https://github.com/junghyun-jacky)| |


---

## ğŸ”¥ Branding

![ì˜ê¶ŒìŒ¤ ê±°](https://user-images.githubusercontent.com/39653584/150317112-aa048eba-ee94-4711-99dd-89dcb3c2746e.png)

---

## ğŸ“² WorkFlow
<img src = "https://user-images.githubusercontent.com/81167570/151120562-3da18d9a-1da0-43ea-92d4-b0576c8472a3.png" width="1000" />

---

## ğŸ“š API Document

### &nbsp;&nbsp;[Spark API Document âœ¨](https://www.notion.so/API-94b97e62a8b84769a784d86992287119)

| Function | Description | Developer |
| --- | --- | --- |
| auth | Apple, Kakao ë¡œê·¸ì¸ | ğŸ¦‹Â ì˜ê¶Œ |
|  | Apple, Kakao íšŒì›ê°€ì… | ğŸ±Â ì„¤í¬ |
| feed | í”¼ë“œ ëª¨ì•„ë³´ê¸° | ğŸ±Â ì„¤í¬ |
|  | í”¼ë“œ ì¢‹ì•„ìš” ë° ì¢‹ì•„ìš” ì·¨ì†Œ | ğŸ»â€â„ï¸ ì •í˜„ / ğŸ¦‹ ì˜ê¶Œ |
| room | ìŠµê´€ë°© ìƒì„± | ğŸ¦‹Â ì˜ê¶Œ |
|  | ë°© ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ | ğŸ±Â ì„¤í¬ |
|  | ëŒ€ê¸°ë°© ìƒì„¸ ì¡°íšŒ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ë°© ìƒì„¸ ì¡°íšŒ | ğŸ±Â ì„¤í¬ |
|  | ë‚˜ì˜ ëª©í‘œ ì„¤ì •í•˜ê¸° | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ë°© ì‹œì‘ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ëŒ€ê¸°ë°© ì¸ì› ì¡°íšŒ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ì‰´ë˜ìš”, ê³ ë¯¼ì¤‘ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ ì¸ì¦í•˜ê¸° | ğŸ±Â ì„¤í¬ |
|  | ìŠ¤íŒŒí¬ ë³´ë‚´ê¸° | ğŸ±Â ì„¤í¬ |
|  | ì°¸ì—¬ ì½”ë“œë¡œ ëŒ€ê¸°ë°© ì¡°íšŒ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ë°© ì°¸ì—¬ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ì°¸ì—¬ì ë‚´ë³´ë‚´ê¸° | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ë°© ë° ëŒ€ê¸°ë°© ë‚˜ê°€ê¸° | ğŸ¦‹Â ì˜ê¶Œ |
|  | ìŠµê´€ë°© ì œê±° | ğŸ¦‹Â ì˜ê¶Œ |
| user | ìœ ì € í”„ë¡œí•„ ì¡°íšŒ | ğŸ±Â ì„¤í¬ |
|  | ìœ ì € í”„ë¡œí•„ ìˆ˜ì • | ğŸ±Â ì„¤í¬ |
| myroom | ë³´ê´€í•¨ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° | ğŸ±Â ì„¤í¬ |
|  | íŠ¹ì • ìŠµê´€ë°© ì¸ì¦ì‚¬ì§„ ëª¨ì•„ë³´ê¸° | ğŸ±Â ì„¤í¬ |
| notice | ì„œë¹„ìŠ¤ ì•Œë¦¼ ì¡°íšŒ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ì„œë¹„ìŠ¤ ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ | ğŸ¦‹Â ì˜ê¶Œ |
|  | í™œë™ ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ | ğŸ¦‹Â ì˜ê¶Œ |
|  | í™œë™ ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ | ğŸ¦‹Â ì˜ê¶Œ |
|  | ì•Œë¦¼ ì‚­ì œ | ğŸ¦‹Â ì˜ê¶Œ |


---

## ğŸ“‘ ERD

<img src="https://user-images.githubusercontent.com/39653584/150285337-1c0dbbd0-a8d7-4e79-9528-d0ffb529b04b.png" width="500px">

---

## ğŸ§© Convention
<details>
<summary>Branch Strategy</summary>
<div markdown="1">

```
main â†’ develop â†’ feature/#3(issue num)
    
1. `feature`ì—ì„œ ê°ì ê¸°ëŠ¥ ì‘ì—…
2. ì‘ì—… ì™„ë£Œ í›„ `develop`ì— PR
3. ì½”ë“œ ë¦¬ë·° í›„ Confirm ë°›ê³  Merge
4. develop ì— Merge ë  ë•Œ ë§ˆë‹¤ **ëª¨ë“  íŒ€ì› develop pull** ë°›ì•„ ìµœì‹  ìƒíƒœ ìœ ì§€
```
</div>
</details>

<details>
<summary>Commit Convention</summary>
<div markdown="1">

| íƒœê·¸ ì´ë¦„ | ì„¤ëª… |
| --- | --- |
| feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ê²½ìš° |
| fix | ë²„ê·¸ë¥¼ ê³ ì¹œ ê²½ìš° |
| !BREAKING CHANGE | ì»¤ë‹¤ë€ API ë³€ê²½ì˜ ê²½ìš° |
| HOTFIX | ê¸‰í•˜ê²Œ ì¹˜ëª…ì ì¸ ë²„ê·¸ë¥¼ ê³ ì³ì•¼ í•˜ëŠ” ê²½ìš° |
| style | ì½”ë“œ í¬ë§· ë³€ê²½, ì„¸ë¯¸ ì½œë¡  ëˆ„ë½, ì½”ë“œ ìˆ˜ì •ì´ ì—†ëŠ” ê²½ìš° |
| comment | í•„ìš”í•œ ì£¼ì„ ì¶”ê°€ ë° ë³€ê²½ |
| docs | ë¬¸ì„œë¥¼ ìˆ˜ì •í•œ ê²½ìš° (ex. README ìˆ˜ì •) |
| rename | íŒŒì¼ í˜¹ì€ í´ë”ëª…ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì˜®ê¸°ëŠ” ì‘ì—…ì¸ ê²½ìš° |
| remove | íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ì‘ì—…ë§Œ ìˆ˜í–‰í•œ ê²½ìš° |
| chore | ë¹Œë“œ íƒœìŠ¤í¬ ì—…ë°ì´íŠ¸, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì„¤ì •í•˜ëŠ” ê²½ìš° |
    
</div>
</details>

<details>
<summary>Coding Convention</summary>
<div markdown="1">
<br>
    
1. **ë³€ìˆ˜ëª…**
    
- Camel Case ì‚¬ìš© (lower Camel Case)
- í•¨ìˆ˜ì˜ ê²½ìš° ë™ì‚¬ + ëª…ì‚¬ ì‚¬ìš©
- Class, ContructorëŠ” *Pascal Case(=upper ì¹´ë©œ ì¼€ì´ìŠ¤)*ë¥¼ ì‚¬ìš©í•œë‹¤.
- ê¸€ìì˜ ê¸¸ì´ëŠ” 20ì ì´ë‚´ë¡œ ì œí•œí•œë‹¤.
- 4ë‹¨ì–´ ì´ìƒì´ ë“¤ì–´ê°€ê±°ë‚˜, ë¶€ë“ì´í•˜ê²Œ 20ì ì´ìƒì´ ë˜ëŠ” ê²½ìš° íŒ€ì›ê³¼ì˜ ìƒì˜ë¥¼ ê±°ì¹œë‹¤.
- Booleanì˜ ê²½ìš° ì¡°ë™ì‚¬+flag ì¢…ë¥˜ë¡œ êµ¬ì„±ëœë‹¤. ex) isNum, hasNum
- ì•½ì–´ëŠ” ë˜ë„ë¡ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
```jsx
    let idx; // bad
    let index; // good
        
    let cnt; // bad
    let count; // good
        
    let arr; // bad
    let array; // good
        
    let seoul2Bucheon; // bad
    let seoulToBucheon; // good
```

---
    
2. **ì£¼ì„ ê·œì¹™**
    
- í•œì¤„ì€ //ë¡œ ì ê³ , ê·¸ ì´ìƒì€ /** */ë¡œ ì ëŠ”ë‹¤.
    
```jsx
    // í•œì¤„ ì£¼ì„ì¼ ë•Œ
    /**
     * ì—¬ëŸ¬ì¤„
     * ì£¼ì„ì¼ ë•Œ
     */
```
    
- í•¨ìˆ˜ì— ëŒ€í•œ ì£¼ì„
    
```jsx
    /**
     *  @ì±Œë¦°ì§€_íšŒê³ _ëŒ“ê¸€_ë“±ë¡
     *  @route POST /:challengeID/comment
     *  @body parentID, text
     *  @error
     *      1. ì±Œë¦°ì§€ id ì˜ëª»ë¨
     *      2. ìš”ì²­ ë°”ë”” ë¶€ì¡±
     *      3. ë¶€ëª¨ ëŒ“ê¸€ id ê°’ì´ ìœ íš¨í•˜ì§€ ì•Šì„ ê²½ìš°
    */
```

---
    
3. **bracket({}) ê·œì¹™**
    
- ifë¬¸ì˜ ì‹¤í–‰ë¬¸ì´ í•œ ì¤„ì¼ ë•Œ
        
    ```jsx
        if(trigger) {
          return;
        }
        // logic start
    ```

---
    
4. **ê´„í˜¸ ì‚¬ìš©**
    
- (if, while, for)ë¬¸ ê´„í˜¸ ë’¤ì— í•œì¹¸ì„ ë„ìš°ê³  ì‚¬ìš©í•œë‹¤.
        
    ```jsx
        if (left == true) {
        	// logic
        }
    ```

---
    
5. **ë„ì–´ì“°ê¸°**
    
    ```jsx
    let a = 5;  (= ì–‘ìª½ ì‚¬ì´ë¡œ ë„ì–´ì“°ê¸° í•˜ê¸°)
    if (a == 3) {
    	// logic
    }
    ```
    
6. **ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì‚¬ìš©**

- Promiseí•¨ìˆ˜ì˜ ì‚¬ìš©ì€ ì§€ì–‘í•˜ê³  async, awaitë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.
    
7. **DataBase Naming**
    
- table ëª… : ì†Œë¬¸ì (ex. user)
- í•„ë“œëª… : snake_case (ex. user_id)
    
</div>
</details>
 
---
    
### ğŸ“ Foldering

```
|-ğŸ“‹ .firebaserc
|-ğŸ“‹ firebase.json
|-ğŸ“‹ .gitignore
|-ğŸ“ functions_
               |- ğŸ“‹ index.js
               |- ğŸ“‹ package.json
               |- ğŸ“‹ .gitignore
               |- ğŸ“‹ .env
               |- ğŸ“ api_ 
               |         |- ğŸ“‹ index.js
               |         |- ğŸ“ routes_
               |                      |- ğŸ“‹ index.js
               |
               |- ğŸ“ config_ 
               |            |- ğŸ“‹ dbConfig.js
               |            |- ğŸ“‹ firebaseClient.js
               |
               |- ğŸ“ constants_
               |               |- ğŸ“‹ jwt.js
               |               |- ğŸ“‹ responseMessage.js
               |               |- ğŸ“‹ statusCode.js
               |
               |- ğŸ“ db_ 
               |        |- ğŸ“‹ db.js
               |        |- ğŸ“‹ index.js
               |
               |- ğŸ“ lib_
               |         |- ğŸ“‹ convertSnakeToCamel.js
               |         |- ğŸ“‹ jwtHandler.js
               |         |- ğŸ“‹ util.js
               |
               |- ğŸ“ middlewares_
                                 |- ğŸ“‹ auth.js
                                 |- ğŸ“‹ uploadImage.js
                                 |- ğŸ“‹ slackAPI.js
```

---

### ğŸ“Œ Dependency Modules
```JSON
{
  "name": "functions",
  "description": "Spark Server",
  "scripts": {
    "lint": "eslint .",
    "serve": "cross-env NODE_ENV=development firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "cross-env NODE_ENV=production firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "12"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^0.24.0",
    "busboy": "^0.3.1",
    "cookie-parser": "^1.4.6",
    "cors": "^2.8.5",
    "cross-env": "^7.0.3",
    "dayjs": "^1.10.7",
    "dotenv": "^10.0.0",
    "eslint-config-prettier": "^8.3.0",
    "express": "^4.17.2",
    "firebase": "^9.5.0",
    "firebase-admin": "^9.12.0",
    "firebase-functions": "^3.11.0",
    "helmet": "^4.6.0",
    "hpp": "^0.2.3",
    "jsonwebtoken": "^8.5.1",
    "lodash": "^4.17.21",
    "multer": "^1.4.3",
    "nanoid": "^3.1.30",
    "node-schedule": "^2.1.0",
    "pg": "^8.7.1"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
```

<img src="https://user-images.githubusercontent.com/69136340/150557506-ceb378c4-9fcc-4c27-ae98-6b22d61386d9.png">
